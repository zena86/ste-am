let dataOrderList = [];
dataOrderList[0] = {
    id: 0,
    picture: "images/card1min.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: true,
    title: "Act Big! Ultimate Music  Festival",
    place: "Pattichion Municipal Amphitheater",
    address: "Nikolaou G. Dimitriou Street , Larnaca, 6031, Cyprus",
    coordinates : {lat: 55.758186, lng: 37.616711},
    text: "An evening of bowling by geeks for geeks. Nothing more, nothing less (adorn bowling shirts — funny shoes provided) Follow @TeamLebowski or #Geek&shy;Bowling on Twitter for up to the minute news Bowling on Twitter for up to the minute news...",
    male: 13,
    female: 87
    };
dataOrderList[1] = {
    id: 1,
    picture: "images/card2.png",
    social: "images/socE.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: true,
    title: "Summer Art Club - Week 1/3",
    place: "Fun Factory Wildeshausen",
    address: "Am Umspannwerk 7, Wildeshausen, 27793, Germany",
    coordinates : {lat: 55.757787, lng: 37.624891},
    text: "Join us for creative holiday activities - this week with Ashley & Letty! Let your 8-13 year olds to join to help burn some of that pent-up creative energy on our fun artist led workshops. You can book all three days, or just one at a time",
    male: 25,
    female: 75
    };
dataOrderList[2] = {
    id: 2,
    picture: "images/card3.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: true,
    title: "Bocca Foodbar @ Vama  Veche",
    place: "Pattichion Municipal Amphitheater",
    address: "Nikolaou G. Dimitriou Street , Larnaca, 6031, Cyprus",
    coordinates:{lat: 55.758186, lng: 37.619711},
    text: "ERLEBT 3 TAGE LANG STRANDFEELING & PARTYSPAß PUR! BEACH PARTY OPENING WIR ERÖFFNEN DIE PARTYSAISON! Seid Ihr bereit für die heißeste Beachparty des Jahres",
    male: 62,
    female: 38
    };
dataOrderList[3] = {
    id: 3,
    picture: "images/card4.png",
    social: "images/socE.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: true,
    title: "Faringdon Community Sports  College - Summer - Week 2",
    place: "University of Netherlands Antilles",
    address: "Sta Maria Willeamstad, Curaçao, AN5999, Netherlands",
    coordinates:{lat: 55.759186, lng: 37.616711},
    text: "Practical Self-Service BI with PowerPivot for Excel SQL Server MVP and Business Intelligence Architect Bill Pearson leads this full-day, hands-on introduction to using PowerPivot for",
    male: 55,
    female: 45
    };
dataOrderList[4] = {
    id: 4,
    picture: "images/card5.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: true,
    title: "Training EN - OpenERP 7.0  Functional Training",
    place: "Boulevard Barcelona",
    address: "La Rambla 27, Barcelona, 08002, Spain",
    coordinates:{lat: 55.757186, lng: 37.617711},
    text: "THE BOILER ROOM is coming to BCN The Boiler Room, un nuevo concepto de fiesta que aterriza en Barcelona, una noche fresca y muy energética con una programación de Dj's de",
    male: 31,
    female: 69
    };
dataOrderList[5] = {
    id: 5,
    picture: "images/card6.png",
    social: "images/socE.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: true,
    title: "Band Workshop with Artists  in Residence Super Tenants",
    place: "Culture Club Revelin",
    address: "Sv. Dominika 3, Dubrovnik, 20 000, Croatia",
    coordinates:{lat: 55.756186, lng: 37.616711},
    text: "Culture Club Revelin predstavio je novi ljetni program ''DREAMGIRLS IN REVELIN'' U bogatom cjelovečernjem programu moći ćete uživati u vrućim plesnim točkama zgodnih",
    male: 57,
    female: 43
    };



dataOrderList[6] = {
    id: 6,
    picture: "images/card1min.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: true,
    title: "Act Big! Ultimate Music  Festival",
    place: "Pattichion Municipal Amphitheater",
    address: "Nikolaou G. Dimitriou Street , Larnaca, 6031, Cyprus",
    coordinates:{lat: 55.758186, lng: 37.616711},
    text: "An evening of bowling by geeks for geeks. Nothing more, nothing less (adorn bowling shirts — funny shoes provided) Follow @TeamLebowski or #Geek&shy;Bowling on Twitter for up to the minute news Bowling on Twitter for up to the minute news...",
    male: 13,
    female: 87
    };

dataOrderList[7] = {
    id: 7,
    picture: "images/card1min.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: true,
    title: "Act Big! Ultimate Music  Festival",
    place: "Pattichion Municipal Amphitheater",
    address: "Nikolaou G. Dimitriou Street , Larnaca, 6031, Cyprus",
    coordinates:{lat: 55.758186, lng: 37.616711},
    text: "An evening of bowling by geeks for geeks. Nothing more, nothing less (adorn bowling shirts — funny shoes provided) Follow @TeamLebowski or #Geek&shy;Bowling on Twitter for up to the minute news Bowling on Twitter for up to the minute news...",
    male: 13,
    female: 87
    };

dataOrderList[8] = {
    id: 8,
    picture: "images/card1min.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: true,
    title: "Act Big! Ultimate Music  Festival",
    place: "Pattichion Municipal Amphitheater",
    address: "Nikolaou G. Dimitriou Street , Larnaca, 6031, Cyprus",
    coordinates:{lat: 55.758186, lng: 37.616711},
    text: "An evening of bowling by geeks for geeks. Nothing more, nothing less (adorn bowling shirts — funny shoes provided) Follow @TeamLebowski or #Geek&shy;Bowling on Twitter for up to the minute news Bowling on Twitter for up to the minute news...",
    male: 13,
    female: 87
    };




dataOrderList[9] = {
    id: 9,
    picture: "images/card3.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: false,
    title: "Bocca Foodbar @ Vama  Veche",
    place: "Pattichion Municipal Amphitheater",
    address: "Nikolaou G. Dimitriou Street , Larnaca, 6031, Cyprus",
    coordinates:{lat: 55.758186, lng: 37.616711},
    text: "ERLEBT 3 TAGE LANG STRANDFEELING & PARTYSPAß PUR! BEACH PARTY OPENING WIR ERÖFFNEN DIE PARTYSAISON! Seid Ihr bereit für die heißeste Beachparty des Jahres",
    male: 62,
    female: 38
    };

dataOrderList[10] = {
    id: 10,
    picture: "images/card3.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: false,
    title: "Bocca Foodbar @ Vama  Veche",
    place: "Pattichion Municipal Amphitheater",
    address: "Nikolaou G. Dimitriou Street , Larnaca, 6031, Cyprus",
    coordinates:{lat: 55.758186, lng: 37.616711},
    text: "ERLEBT 3 TAGE LANG STRANDFEELING & PARTYSPAß PUR! BEACH PARTY OPENING WIR ERÖFFNEN DIE PARTYSAISON! Seid Ihr bereit für die heißeste Beachparty des Jahres",
    male: 62,
    female: 38
    };
dataOrderList[11] = {
    id: 11,
    picture: "images/card3.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: false,
    title: "Bocca Foodbar @ Vama  Veche",
    place: "Pattichion Municipal Amphitheater",
    address: "Nikolaou G. Dimitriou Street , Larnaca, 6031, Cyprus",
    coordinates:{lat: 55.758186, lng: 37.616711},
    text: "ERLEBT 3 TAGE LANG STRANDFEELING & PARTYSPAß PUR! BEACH PARTY OPENING WIR ERÖFFNEN DIE PARTYSAISON! Seid Ihr bereit für die heißeste Beachparty des Jahres",
    male: 62,
    female: 38
    };
dataOrderList[12] = {
    id: 12,
    picture: "images/card3.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: false,
    title: "Bocca Foodbar @ Vama  Veche",
    place: "Pattichion Municipal Amphitheater",
    address: "Nikolaou G. Dimitriou Street , Larnaca, 6031, Cyprus",
    coordinates:{lat: 55.758186, lng: 37.616711},
    text: "ERLEBT 3 TAGE LANG STRANDFEELING & PARTYSPAß PUR! BEACH PARTY OPENING WIR ERÖFFNEN DIE PARTYSAISON! Seid Ihr bereit für die heißeste Beachparty des Jahres",
    male: 62,
    female: 38
    };
dataOrderList[13] = {
    id: 13,
    picture: "images/card3.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: false,
    title: "Bocca Foodbar @ Vama  Veche",
    place: "Pattichion Municipal Amphitheater",
    address: "Nikolaou G. Dimitriou Street , Larnaca, 6031, Cyprus",
    coordinates:{lat: 55.758186, lng: 37.616711},
    text: "ERLEBT 3 TAGE LANG STRANDFEELING & PARTYSPAß PUR! BEACH PARTY OPENING WIR ERÖFFNEN DIE PARTYSAISON! Seid Ihr bereit für die heißeste Beachparty des Jahres",
    male: 62,
    female: 38
    };
dataOrderList[14] = {
    id: 14,
    picture: "images/card3.png",
    social: "images/facebook.png",
    date: "Aug 17, 2013  02:00pm - 08:00pm IST",
    hot: false,
    title: "Bocca Foodbar @ Vama  Veche",
    place: "Pattichion Municipal Amphitheater",
    address: "Nikolaou G. Dimitriou Street , Larnaca, 6031, Cyprus",
    coordinates:{lat: 55.758186, lng: 37.616711},
    text: "ERLEBT 3 TAGE LANG STRANDFEELING & PARTYSPAß PUR! BEACH PARTY OPENING WIR ERÖFFNEN DIE PARTYSAISON! Seid Ihr bereit für die heißeste Beachparty des Jahres",
    male: 62,
    female: 38
    };


$(document).ready(function() {
    
    $(".header__burger").click(function(event) {
        $(".header__burger, .header__menu").toggleClass("active");
        $("body").toggleClass("lock");
    });
    
     $(".calendar").click(function(event) {
        $(".calendar, #sorting__datepicker").toggleClass("active-datapicker");
    });
    
    
    $('#hot').on('click', function(){
        
        loadMore(0, true);
        $("#trend").removeClass("sorting__btn_active");
        $("#hot").addClass("sorting__btn_active");

    });
    $('#trend').on('click', function(){
        loadMore(0, false);
        $("#hot").removeClass("sorting__btn_active");
        $("#trend").addClass("sorting__btn_active");

    });
   
    
    myMap();
    loadMore(0, true);
});


function myMap(){
    let mapCanvas = document.getElementById("map");
    let mapOptions = {
        center: new google.maps.LatLng(55.760186, 37.618711),
        zoom: 15,
        //Убрали элементы управления картой
//        disableDefaultUI: true,

        fullscreenControl: false,
        zoomControl: false,
//        zoomControlOptions: {
//            style: google.maps.ZoomControlStyle.LARGE,
//            position: google.maps.ControlPosition.TOP_LEFT 
//        },
        mapTypeControl: false,
        scaleControl: true,
        streetViewControl: false,
        overviewMapControl: true,
        rotateControl: true,
        
        

        // Добавляем свои стили для отображения карты
        styles: [
    {
        "featureType": "administrative",
        "elementType": "labels.text.fill",
        "stylers": [
            {
                "color": "#444444"
            }
        ]
    },
    {
        "featureType": "administrative.country",
        "elementType": "labels.text",
        "stylers": [
            {
                "visibility": "off"
            },
            {
                "color": "#767676"
            }
        ]
    },
    {
        "featureType": "administrative.locality",
        "elementType": "labels.text",
        "stylers": [
            {
                "visibility": "simplified"
            },
            {
                "color": "#767676"
            },
            {
                "lightness": "-23"
            }
        ]
    },
    {
        "featureType": "landscape",
        "elementType": "all",
        "stylers": [
            {
                "color": "#f2f2f2"
            }
        ]
    },
    {
        "featureType": "poi",
        "elementType": "all",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "poi.park",
        "elementType": "geometry",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "#dfe2dc"
            }
        ]
    },
    {
        "featureType": "poi.park",
        "elementType": "labels",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },  
    {
        "featureType": "road",
        "elementType": "all",
        "stylers": [
            {
                "saturation": -100
            },
            {
                "lightness": 45
            }
        ]
    },
    {
        "featureType": "road.highway",
        "elementType": "all",
        "stylers": [
            {
                "visibility": "simplified"
            },
            {
                "color": "#dedbcd"
            }
        ]
    },
    {
        "featureType": "road.arterial",
        "elementType": "labels.icon",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "transit",
        "elementType": "all",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "water",
        "elementType": "all",
        "stylers": [
            {
                "color": "#c2cad7"
            },
            {
                "visibility": "on"
            },
            {
                "lightness": "49"
            }
        ]
    },    
    {
        "featureType": "water",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "color": "#c2cad7"
            },
            {
                "lightness": "49"
            }
        ]
    }
] 
};
 
    let map = new google.maps.Map(mapCanvas, mapOptions);
    
for (let i=0; i<dataOrderList.length; i++) {
    let card = dataOrderList[i];
    // Создаем маркер на карте
    let marker = new google.maps.Marker(
        {

            // Определяем позицию маркера
            position: card.coordinates,

            // Указываем на какой карте он должен появится. (На странице ведь может быть больше одной карты)
            map: map,

            // Пишем название маркера - появится если навести на него курсор и немного подождать
//            title: 'Наш маркер: Большой театр',

            // Укажем свою иконку для маркера    
            icon: 'images/marker.png'  
        }
    ); 
     
    // Создаем наполнение для информационного окна
        let contentString = 
        '<div class="cards__item cards__item_sm">'+
        '<div class="cards__header">'+
        '<div class="cards__pic">'+
        '<img src="' + card.picture + '" alt="">'+
        '</div>'+
        '</div>'+
        '<div class="cards__body cards__body_sm">'+
        '<h2 class="cards__title cards__title_sm">' + card.title + '</h2>'+
        '<p class="cards__top-address">' + card.place + '</p>'+   
        '<p class="cards__bottom-address cards__bottom-address_sm">' + card.address + '</p>'+    
        '</div>'+
        '</div>';
            
    // Создаем информационное окно
        let infowindow = new google.maps.InfoWindow({
            content: contentString,
            maxWidth: 310
        });    
    infowindow.setContent(contentString);

    // Создаем прослушивание, по клику на маркер - открыть инфо-окно infowindow
        marker.addListener('click', function() {
        infowindow.open(map, marker);
        });  

} 
    
    
    
    //Кастомные кнопки зума

    $(".map__zoom-btn_plus").click(function(event) {
        map.setZoom(map.getZoom() + 1 );
    });
    $(".map__zoom-btn_minus").click(function(event) {
        map.setZoom(map.getZoom() - 1 );
    });
    
    
    
    //Circle Shapes

    let eventCircle = new google.maps.Circle({
        strokeColor: "#fe2232",
        strokeWeight: 3,
        fillColor: "transparent",
        map,
        center: {lat: 55.760186, lng: 37.618711},
        radius: 550
    });
       
let centerMarker = new google.maps.Marker({
      position: { lat: 55.760186, lng: 37.618711 },
      map: map,
      icon: {
      url: "images/centericon.png",
      size: new google.maps.Size(32, 32),
      anchor: new google.maps.Point(16, 16),
      },
      draggable: true,
    });    
    
let dragMarker = new google.maps.Marker({
    position: { lat: 55.760186, lng: 37.62745 },
    map: map,
    
    icon: {
    url: "images/resizeicon.png",
    size: new google.maps.Size(32, 32),
    anchor: new google.maps.Point(16, 16),
    },
    draggable: true
    });
    
google.maps.event.addListener(dragMarker, "drag", function(event){
    let destination = google.maps.geometry.spherical.computeDistanceBetween (centerMarker.position, event.latLng);
    eventCircle.setRadius(destination);
});  

google.maps.event.addListener(centerMarker, "drag", function(event){
    let radius = eventCircle.radius;  
    let dragMarkerCoord = google.maps.geometry.spherical.computeOffset(event.latLng, radius, 90);
    dragMarker.setPosition(dragMarkerCoord); 
    eventCircle.setCenter(event.latLng);
});
    
    
    
    
    
    
    
    
    
    
    
    
}




function getCardHtml(cardObject){
    let cardHtml="";
    cardHtml+="<article class='cards__item'>";
    cardHtml+="<div class='cards__header'>";
    cardHtml+="<div class='cards__pic'>";
    cardHtml+="<img src='" + cardObject.picture + "'>";
    cardHtml+="</div>";
    cardHtml+="<div class='cards__row'>";
    cardHtml+="<div class='cards__row-cont'>";
    cardHtml+="<div class='cards__social'>";
    cardHtml+="<img src='" + cardObject.social + "'>";
    cardHtml+="</div>";
    cardHtml+="<p class='cards__date'>" + cardObject.date + "</p>";
    cardHtml+="<div class='cards__like'>";
    cardHtml+="<svg class='cards__heart' version='1.1' id='Слой_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 37 33' style='enable-background:new 0 0 37 33;' xml:space='preserve'>";
    cardHtml+="<g>";
    cardHtml+="<path class='st0' d='M18.5,28.9c-0.3,0-0.6-0.1-0.8-0.3C5.8,21.7,5.3,15,5.3,13.5c0,0,0,0,0-0.1c0-4.2,3.4-7.6,7.7-7.6 c2.1,0,4.1,0.8,5.5,2.3c1.4-1.5,3.4-2.3,5.5-2.3c4.2,0,7.6,3.4,7.7,7.6c0,1-0.1,8.1-12.3,15.2c-0.1,0.1-0.2,0.1-0.4,0.2 c0,0,0,0,0,0C18.8,28.9,18.6,28.9,18.5,28.9z' fill='#fe2232'/>";
    cardHtml+="<path d='M24,7.4c3.4,0,6.2,2.7,6.2,6.1c0,0,0.7,6.8-11.7,13.9l0,0c0,0,0,0,0,0c0,0,0,0,0,0v0C6.8,20.6,6.8,14.2,6.8,13.5 c0,0,0,0,0-0.1c0-3.4,2.8-6.1,6.2-6.1c2.4,0,4.5,1.4,5.5,3.4C19.5,8.7,21.6,7.4,24,7.4 M24,4.4c-2,0-3.9,0.7-5.5,1.8 C16.9,5,15,4.4,13,4.4c-5.1,0-9.2,4.1-9.2,9.1c0,0,0,0.1,0,0.1c0,1.8,0.7,9.2,13.1,16.4c0,0,0,0,0,0c0.3,0.2,0.6,0.3,1,0.4 c0.2,0,0.4,0.1,0.6,0.1c0.3,0,0.5,0,0.8-0.1c0.3-0.1,0.6-0.2,0.8-0.4c12.8-7.4,13.1-15,13-16.5C33.1,8.4,29,4.4,24,4.4L24,4.4z' fill='#454237'/>";
    cardHtml+="<g>";
    cardHtml+="</svg>";
    cardHtml+="</div>";
    cardHtml+="</div>";
    cardHtml+="</div>";
    cardHtml+="</div>";
    cardHtml+="<div class='cards__body'>";
    cardHtml+="<h2 class='cards__title'>" + cardObject.title + "</h2>";
    cardHtml+="<p class='cards__top-address'>" + cardObject.place + "</p>";
    cardHtml+="<p class='cards__bottom-address'>" + cardObject.address + "</p>";
    cardHtml+="<p class='cards__desc'>" + cardObject.text + "</p>";
    cardHtml+="</div>";
    cardHtml+="<div class='cards__footer footer-cards'>";
    cardHtml+="<div class='footer-cards__item'>";
    cardHtml+="<div class='footer-cards__icon'>";
    cardHtml+="<img src='images/man2.png' alt=''>";
    cardHtml+="</div>";
    cardHtml+="<div>";
    cardHtml+="<p class='footer-cards__percent'>" + cardObject.male + "<span>%</span></p>";
    cardHtml+="<p class='footer-cards__gender'>male</p>";
    cardHtml+="</div>";
    cardHtml+="</div>";
    cardHtml+="<div class='footer-cards__item'>";
    cardHtml+="<div class='footer-cards__icon'>";
    cardHtml+="<img src='images/woman2.png' alt=''>";
    cardHtml+="</div>";
    cardHtml+="<div>";
    cardHtml+="<p class='footer-cards__percent'>" + cardObject.female + "<span>%</span></p>";
    cardHtml+="<p class='footer-cards__gender'>female</p>";
    cardHtml+="</div>";
    cardHtml+="</div>";
    cardHtml+="</div>";
    cardHtml+="</article>";
    
    return cardHtml;
}

function loadMore(page, isHotEvent){
    let filtrPage=dataOrderList;
    if(isHotEvent)
    {
        filtrPage = filtrPage.filter(function(offer)
        {
            return offer.hot === true;
        });
    }
    let cardsPerPage = 6;
    let startPageIndex = page*cardsPerPage;
    let endPageIndex = Math.min(startPageIndex+cardsPerPage-1, filtrPage.length-1);
    let gridObject = $(".cards__grid");
    if (page === 0) 
        {
            gridObject.html("");
        }
    for (i=startPageIndex; i<=endPageIndex; i++){
        let cardObjectHtml = getCardHtml(filtrPage[i]);
        gridObject.append(cardObjectHtml);
    }
    let btnObject = $(".btn-load__cont");
    if (endPageIndex < filtrPage.length-1)
    { 
        let btnHtml = "<button class='btn__load' onclick='javascript:loadMore(" + (page+1) + "," + isHotEvent + ");'>Load More</button>";
        btnObject.html(btnHtml);
    }else{
        btnObject.html("");
    }
    
}